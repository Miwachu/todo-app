<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>メッセージ一覧</title>
</head>
<body>

<h1>todo app list</h1>
 
<form method="post" action="/post">
<input type="text" name="name" placeholder="todo">
<input type="date" name="deadline" placeholder="期限">
<button type="submit">投稿</button>
</form>
 

    <p th:if="${error}" th:text="${error}" style="color:red;"></p>
 
    <ul>

<li th:each="msg : ${messages}">
<strong th:text="${msg.name}">名前</strong>:
<span th:text="${msg.deadline}"></span>
 
            <!-- ★ 显示完成状态 -->
<span th:if="${msg.done}" style="color:green;">（完了）</span>
 
            <!-- ★ 完了ボタン：未完了のみ表示 -->
<form th:if="!${msg.done}"

                  th:action="@{/update_todo}" method="post"

                  style="display:inline">
<input type="hidden" name="todo_id" th:value="${msg.id}" />
<button type="submit">完了</button>
</form>
 
            <!-- ★ 削除ボタン -->
<form th:action="@{/delete_todo}" method="post" style="display:inline">
<input type="hidden" name="todo_id" th:value="${msg.id}" />
<button type="submit">削除</button>
</form>
</li>
</ul>

</body>
</html>

 